<?xml version="1.0" encoding="UTF-8"?>

<!-- Configures the CXF Endpoints -->

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:cxf="http://camel.apache.org/schema/cxf" 
	xmlns:policy="http://cxf.apache.org/policy" 
	xmlns:wsp="http://www.w3.org/2006/07/ws-policy"
	xmlns:camel="http://camel.apache.org/schema/spring" 
    xmlns:sec="http://cxf.apache.org/configuration/security"
    xmlns:http="http://cxf.apache.org/transports/http/configuration"
	xmlns:httpj="http://cxf.apache.org/transports/http-jetty/configuration"    
	xsi:schemaLocation="
	   http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd
       http://cxf.apache.org/policy http://cxf.apache.org/schemas/policy.xsd
       http://www.w3.org/2006/07/ws-policy http://www.w3.org/2006/07/ws-policy.xsd
       http://cxf.apache.org/configuration/security	http://cxf.apache.org/schemas/configuration/security.xsd
	   http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd
	   http://cxf.apache.org/transports/http-jetty/configuration http://cxf.apache.org/schemas/configuration/http-jetty.xsd
       ">

	<!-- OJB Arrest Reporting Service, hosted by this intermediary -->
	<cxf:cxfEndpoint id="ArrestReportingService"
		address="${arrestReportingService.arrestReportingServiceEndpoint}"
		wsdlURL="classpath:service-specifications/Arrest_Reporting_Service/schema/RS_WS-SIP_v1.2/Arrest_Reporting_Service.wsdl"
		serviceName="ojbc:Arrest-Reporting-ServiceService" endpointName="ojbc:Arrest-Reporting-Service"
		xmlns:ojbc="http://ojbc.org/Services/WSDL/ArrestReportingService/1.0">
		 <cxf:features> 
 			<policy:policies> 
 				<wsp:Policy xmlns:wsam="http://www.w3.org/2007/02/addressing/metadata"> 
 					<wsam:Addressing> 
 						<wsp:Policy /> 
 					</wsam:Addressing> 
 				</wsp:Policy> 
 			</policy:policies> 
 		</cxf:features>	 
	</cxf:cxfEndpoint>
	    
	<!-- OJB Notification Broker Service, invoked by intermediary -->
	<cxf:cxfEndpoint id="notificationBrokerService"
		address="${arrestReportingService.notificationBrokerEndpoint}"
		wsdlURL="classpath:service-specifications/Subscription_Notification_Service/WSDL/OJBWSNotification.wsdl"
		serviceName="ojb-nb:NotificationBrokerServiceService" endpointName="ojb-nb:NotificationBrokerService"
		xmlns:ojb-nb="http://www.ojbc.org/SubscribeNotify/NotificationBroker">
	</cxf:cxfEndpoint>
	
	<httpj:engine-factory bus="cxf">
		<!-- you just need to specify the TLS Server configuration for the certain 
			port -->
		<httpj:engine port="${arrestReportingService.portNumber}">
			<httpj:tlsServerParameters>
				<sec:keyManagers
					keyPassword="${arrestReportingService.keyPassword}">
					<sec:keyStore type="JKS"
						password="${arrestReportingService.keystorePassword}"
						file="${arrestReportingService.keystoreLocation}" />
				</sec:keyManagers>
				<sec:cipherSuitesFilter>
					    <sec:include>TLS_DHE_RSA_WITH_AES_128_CBC_SHA</sec:include>
					    <sec:include>SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA</sec:include>
					    <sec:include>TLS_RSA_WITH_AES_128_CBC_SHA</sec:include>
					    <sec:include>SSL_RSA_WITH_3DES_EDE_CBC_SHA</sec:include>
				</sec:cipherSuitesFilter>
			</httpj:tlsServerParameters>
		</httpj:engine>
	</httpj:engine-factory>	
	
</beans>
